
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      -->
      <title>demo</title>
      <meta name="generator" content="MATLAB 7.8">
      <meta name="date" content="2010-05-21">
      <meta name="m-file" content="demo"><style type="text/css">

body {
  background-color: white;
  margin:10px;
}

h1 {
  color: #990000; 
  font-size: x-large;
}

h2 {
  color: #990000;
  font-size: medium;
}

/* Make the text shrink to fit narrow windows, but not stretch too far in 
wide windows. */ 
p,h1,h2,div.content div {
  max-width: 600px;
  /* Hack for IE6 */
  width: auto !important; width: 600px;
}

pre.codeinput {
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #A020F0}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

  </style></head>
   <body>
      <div class="content">
         <h2>Contents</h2>
         <div>
            <ul>
               <li><a href="#1">Load some data</a></li>
               <li><a href="#2">plotall</a></li>
               <li><a href="#3">Panning and zooming</a></li>
               <li><a href="#4">Configuring subplot layout</a></li>
               <li><a href="#5">Aligning axes</a></li>
               <li><a href="#7">Pages</a></li>
               <li><a href="#8">More properties</a></li>
               <li><a href="#9">Usage</a></li>
            </ul>
         </div>
         <h2>Load some data<a name="1"></a></h2><pre class="codeinput">[dsrc1 fs] = wavread(<span class="string">'sounds/ssc/clean/t25_bwik1s_m25_bgwf4n.wav'</span>);
[dsrc2 fs] = wavread(<span class="string">'sounds/ssc/clean/t25_bwik1s_m25_bgwf4n_masker.wav'</span>);

dmix = dsrc1 + dsrc2;

NFFT = 640;
NWIN = NFFT;
NHOP = NFFT / 4;
Ssrc1 = dB(stft(dsrc1, NFFT, NWIN, NHOP));
Ssrc2 = dB(stft(dsrc2, NFFT, NWIN, NHOP));
Smix = dB(stft(dmix, NFFT, NWIN, NHOP));

Msrc1 = melfcc(dsrc1);
Msrc2 = melfcc(dsrc2);
Mmix = melfcc(dmix);
</pre><h2>plotall<a name="2"></a></h2>
         <p>plotall lets you organize multiple subplots using a single function call.</p><pre class="codeinput">plotall(Smix, Ssrc1, Ssrc2);
<span class="comment">% Note that this is equivalent to passing in a cell array of data as a</span>
<span class="comment">% single argument:</span>
plotall({Smix, Ssrc1, Ssrc2});
</pre><img vspace="5" hspace="5" src="demo_01.png" alt=""> <h2>Panning and zooming<a name="3"></a></h2><pre class="codeinput">clf
<span class="comment">% Note the nifty scrollbars that let you pan and zoom the x-, y-, and</span>
<span class="comment">% color axes.  Right click and drag to scroll.  Middle click to zoom.</span>
plotall(Smix, Ssrc1, Ssrc2)
plotall(Smix, Ssrc1, Ssrc2, <span class="string">'clim'</span>, [-40 27.2], <span class="string">'xlim'</span>, [45 127], <span class="string">'ylim'</span>, [1 100]);
</pre><img vspace="5" hspace="5" src="demo_02.png" alt=""> <h2>Configuring subplot layout<a name="4"></a></h2><pre class="codeinput">clf
<span class="comment">% plotall can automatically manage subplot layout.</span>
<span class="comment">% (Note that subplots are filled in row-wise)</span>
plotall(Smix, Smix, Ssrc1, Ssrc2, <span class="string">'subplot'</span>, [2 2]);
</pre><img vspace="5" hspace="5" src="demo_03.png" alt=""> <h2>Aligning axes<a name="5"></a></h2><pre class="codeinput">clf
<span class="comment">% Let each subplot have independent y and color axes, but keep the time</span>
<span class="comment">% axis fixed across all subplots.</span>
plotall(Ssrc1, Msrc1, <span class="string">'align'</span>, <span class="string">'x'</span>)
</pre><img vspace="5" hspace="5" src="demo_04.png" alt=""> <pre class="codeinput">clf
<span class="comment">% Sometimes you don't want anything to be aligned.</span>
plotall(dsrc1, Ssrc1, <span class="string">'align'</span>, <span class="string">''</span>)
</pre><img vspace="5" hspace="5" src="demo_05.png" alt=""> <h2>Pages<a name="7"></a></h2><pre class="codeinput">clf
<span class="comment">% If the 'subplots' property is set but there are more arguments than</span>
<span class="comment">% subplots, the subplots are split over multiple "pages".  Pages can be</span>
<span class="comment">% navigated using the controls on the top right of the figure.</span>
<span class="comment">% See the'plot_pages' function for another way to get this functionality</span>
<span class="comment">% without the rest of plotall's goodies.</span>
plotall(Smix, Ssrc1, Ssrc2, <span class="string">'subplot'</span>, [2 1])
</pre><img vspace="5" hspace="5" src="demo_06.png" alt=""> <h2>More properties<a name="8"></a></h2><pre class="codeinput">clf
<span class="comment">% You can pass in name-value pairs to configure different properties</span>
<span class="comment">% of the subplots.  Passing cell arrays in lets you configure</span>
<span class="comment">% different properties for each subplot, otherwise properties are</span>
<span class="comment">% shared across all subplots.  See 'help plotall' for more details.</span>
t = [1:NHOP:length(dmix)] / fs;
<span class="comment">% Quantize things to the nearest hundredth of a second.</span>
t = round(t * 100) / 100;
xticks = 1:20:length(t);
f = [0:NFFT/2] * fs / NFFT * 1e-3;
yticks = 1:80:length(f);
plotall(Smix, Ssrc1, Ssrc2, <span class="string">'clim'</span>, [-25 25], <span class="string">'colorbar'</span>, false, <span class="keyword">...</span>
	<span class="string">'ytick'</span>, yticks, <span class="string">'yticklabel'</span>, f(yticks), <span class="keyword">...</span>
	<span class="string">'ylabel'</span>, <span class="string">'Frequency (kHz)'</span>, <span class="keyword">...</span>
	<span class="string">'xtick'</span>, {[], [], xticks}, <span class="string">'xticklabel'</span>, t(xticks), <span class="keyword">...</span>
	<span class="string">'xlabel'</span>, {<span class="string">''</span>, <span class="string">''</span>, <span class="string">'Time (seconds)'</span>}, <span class="keyword">...</span>
	<span class="string">'title'</span>, {<span class="string">'Mixture'</span>, <span class="string">'Clean source 1'</span>, <span class="string">'Clean source 2'</span>}, <span class="keyword">...</span>
	<span class="string">'pub'</span>, true)  <span class="comment">% "'pub', true" turns off scrollbars.</span>
</pre><img vspace="5" hspace="5" src="demo_07.png" alt=""> <h2>Usage<a name="9"></a></h2><pre class="codeinput">help <span class="string">plotall</span>
</pre><pre class="codeoutput">  plotall(data1, data2, ..., datan, property1, value1, property2, value2, ...)
  
  Plots all of the matrices contained in data1, data2, ... as subplots
  of the same figure.
 
  A series of name value pairs that correspond to optional settings
  and various Matlab plot properties can optionally be passed in.
 
  Supported properties applied across all subplots (default value):
  'align'                ('xyc'): set axes to be aligned.  can be any
                                  combination of 'x', 'y', and 'c'
  'colorbar'              (true): if true displays a colorbar next to each plot
  'colormap'          (colormap): colormap to use
  'figure'                 (gcf): figure handle
  'fun'                 (@(x) x): function to be applied to each element of
                                  data before plotting
  'order'                  ('r'): ordering of subplots ('r' for row-major order
                                  or 'c' for column-major order)
  'pub'                  (false): If true, try to make nicer looking
                                  plots suitable for publication
  'subplot'              ([n 1]): subplot arrangement
 
  If the 'pub' property is false, additional GUI controls are added to
  the figure, including scrollbars to control panning, zooming, and
  'caxis' settings.  Also, if n is larger than the number of subplots
  specified in the properties, s, then only s subplots will be
  displayed at a given time, but paging controls will be added to
  figure to give access to the remaining n-s plots.
 
  Supported per-subplot properties (default value):
  'axis'                  ('xy'): set axis appearance or scaling
  'plot_fun'  (@plot_or_imagesc): function to use for plotting each element
                                  of data
  'title'        ({'1','2',...}): titles for each matrix in data
  'xlabel'                  (''): x axis label
  'ylabel'                  (''): y axis label
  'zlabel'                  (''): z axis label
 
  Other valid per-subplot axis properties and values (e.g. 'CLim',
  'XLim', 'XTick') can be passed in as well.  
 
  Each per-subplot property value can be either a scalar, in which
  case the same value is applied to all subplots, or a cell array
  which specifies the values for each subplot individually.  Finally
  if value specified for one of these properties is a function that
  takes no arguments, it will be evaluated each time the property is
  set.  For example, is useful for adjusting the units of tick labels
  without knowing where the ticks are in advance.  E.g. setting
  'xticklabel' to @() get(gca, 'xtick')*1e-3 can automatically convert
  the horizontal axis labels from milliseconds to seconds.
  
  2008-11-12 ronw@ee.columbia.edu

</pre><p class="footer"><br>
            Published with MATLAB&reg; 7.8<br></p>
      </div>
      <!--
##### SOURCE BEGIN #####
%% Load some data
[dsrc1 fs] = wavread('sounds/ssc/clean/t25_bwik1s_m25_bgwf4n.wav');
[dsrc2 fs] = wavread('sounds/ssc/clean/t25_bwik1s_m25_bgwf4n_masker.wav');

dmix = dsrc1 + dsrc2;

NFFT = 640;
NWIN = NFFT; 
NHOP = NFFT / 4;
Ssrc1 = dB(stft(dsrc1, NFFT, NWIN, NHOP));
Ssrc2 = dB(stft(dsrc2, NFFT, NWIN, NHOP));
Smix = dB(stft(dmix, NFFT, NWIN, NHOP));

Msrc1 = melfcc(dsrc1);
Msrc2 = melfcc(dsrc2);
Mmix = melfcc(dmix);


%% plotall
% plotall lets you organize multiple subplots using a single function call.
plotall(Smix, Ssrc1, Ssrc2);
% Note that this is equivalent to passing in a cell array of data as a
% single argument:
plotall({Smix, Ssrc1, Ssrc2});

%% Panning and zooming
clf
% Note the nifty scrollbars that let you pan and zoom the x-, y-, and 
% color axes.  Right click and drag to scroll.  Middle click to zoom.
plotall(Smix, Ssrc1, Ssrc2)
plotall(Smix, Ssrc1, Ssrc2, 'clim', [-40 27.2], 'xlim', [45 127], 'ylim', [1 100]);

%% Configuring subplot layout
clf
% plotall can automatically manage subplot layout.
% (Note that subplots are filled in row-wise)
plotall(Smix, Smix, Ssrc1, Ssrc2, 'subplot', [2 2]);

%% Aligning axes
clf
% Let each subplot have independent y and color axes, but keep the time
% axis fixed across all subplots.
plotall(Ssrc1, Msrc1, 'align', 'x')

%%
clf
% Sometimes you don't want anything to be aligned.
plotall(dsrc1, Ssrc1, 'align', '')

%% Pages
clf
% If the 'subplots' property is set but there are more arguments than
% subplots, the subplots are split over multiple "pages".  Pages can be
% navigated using the controls on the top right of the figure.
% See the'plot_pages' function for another way to get this functionality
% without the rest of plotall's goodies.
plotall(Smix, Ssrc1, Ssrc2, 'subplot', [2 1])

%% More properties
clf
% You can pass in name-value pairs to configure different properties
% of the subplots.  Passing cell arrays in lets you configure
% different properties for each subplot, otherwise properties are
% shared across all subplots.  See 'help plotall' for more details.
t = [1:NHOP:length(dmix)] / fs;
% Quantize things to the nearest hundredth of a second.
t = round(t * 100) / 100;
xticks = 1:20:length(t);
f = [0:NFFT/2] * fs / NFFT * 1e-3;
yticks = 1:80:length(f);
plotall(Smix, Ssrc1, Ssrc2, 'clim', [-25 25], 'colorbar', false, ...
	'ytick', yticks, 'yticklabel', f(yticks), ...
	'ylabel', 'Frequency (kHz)', ...
	'xtick', {[], [], xticks}, 'xticklabel', t(xticks), ...
	'xlabel', {'', '', 'Time (seconds)'}, ...
	'title', {'Mixture', 'Clean source 1', 'Clean source 2'}, ...
	'pub', true)  % "'pub', true" turns off scrollbars.


%% Usage
help plotall


##### SOURCE END #####
-->
   </body>
</html>